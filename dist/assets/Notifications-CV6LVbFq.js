import{c as j,u as g,b0 as w,j as e,S as c,t as b,r as y,Y as k,b1 as q,O as m}from"./index-zoCVIjJL.js";import{b as A,a as R}from"./hook-Bpn_aVtV.js";import{D as v,a as I}from"./DialogTitle-BogMBega.js";import{T as x}from"./Modal-D8Ubx5EF.js";import{L as N}from"./ListItem-Dt54R3ud.js";import{A as C}from"./Avatar-CEZlIwUk.js";import{B as p}from"./Button-DiAwvBb8.js";import"./ButtonBase-Cn_JI8Ky.js";import"./Menu-BjFoS8hj.js";import"./isMuiElement-BG5RyRtW.js";const W=()=>{var l;const{isNotification:n}=j(i=>i.misc),t=g(),{isLoading:r,data:s,error:a,isError:u}=w(),[f]=A(q),d=async({_id:i,accept:o})=>{t(m(!1)),await f("Accepting...",{requestId:i,accept:o})},h=()=>t(m(!1));return R([{error:a,isError:u}]),e.jsx(v,{open:n,onClose:h,children:e.jsxs(c,{p:{xs:"1rem",sm:"2rem"},children:[e.jsx(I,{children:"Notifications"}),r?e.jsx(b,{}):e.jsx(e.Fragment,{children:(s==null?void 0:s.allRequests.length)>0?(l=s==null?void 0:s.allRequests)==null?void 0:l.map(({sender:i,_id:o})=>e.jsx(D,{sender:i,_id:o,handler:d},o)):e.jsx(x,{textAlign:"center",children:"0 notifications"})})]})})},D=y.memo(({sender:n,_id:t,handler:r})=>{const{name:s,avatar:a}=n;return e.jsx(N,{children:e.jsxs(c,{direction:"row",alignItems:"center",spacing:"1rem",width:"100%",children:[e.jsx(C,{src:k(a)}),e.jsx(x,{variant:"body1",sx:{flexGlow:1,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:`${s} sent you a friend request`}),e.jsxs(c,{direction:{xs:"column",sm:"row"},children:[e.jsx(p,{onClick:()=>r({_id:t,accept:!0}),children:"Accept"}),e.jsx(p,{color:"error",onClick:()=>r({_id:t,accept:!1}),children:"Reject"})]})]})})});export{W as default};
